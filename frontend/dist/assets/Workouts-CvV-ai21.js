import{r as a,z as l,j as e,o as p,S as D,k as R,p as w}from"./index-DAsNgVti.js";import{u as A}from"./useApi-ex_VrPEw.js";import{B as n}from"./Button-CcPpVbSf.js";import{I as m}from"./Input-CmxOoK9T.js";const $=()=>{const{get:u,post:j}=A(),[f,k]=a.useState([]),[v,S]=a.useState([]),[C,W]=a.useState(!0),[E,c]=a.useState(!1),[b,o]=a.useState(null),[h,N]=a.useState({title:""}),[s,i]=a.useState({exerciseId:"",reps:"",weight:"",rpe:""}),[g,d]=a.useState(!1),x=a.useCallback(async()=>{try{const[t,r]=await Promise.all([u("/workouts"),u("/exercises")]);k(t.workouts||[]),S(r.exercises||[])}catch(t){l.error(t.message)}finally{W(!1)}},[u]);a.useEffect(()=>{x()},[x]);const I=async t=>{if(t.preventDefault(),!h.title.trim()){l.error("Enter a workout title");return}d(!0);try{const r=await j("/workouts",{title:h.title});l.success(`Workout created! +${r.xpEarned} XP ðŸ”¥`),c(!1),N({title:""}),x()}catch(r){l.error(r.message)}finally{d(!1)}},P=async t=>{if(t.preventDefault(),!s.exerciseId||!s.reps){l.error("Exercise and reps are required");return}d(!0);try{await j(`/workouts/${b}/sets`,{exerciseId:parseInt(s.exerciseId),reps:parseInt(s.reps),weight:s.weight?parseFloat(s.weight):null,rpe:s.rpe?parseFloat(s.rpe):null}),l.success("Set added!"),o(null),i({exerciseId:"",reps:"",weight:"",rpe:""}),x()}catch(r){l.error(r.message)}finally{d(!1)}};return e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Workouts"}),e.jsx("p",{className:"text-text-muted mt-1",children:"Track your training sessions"})]}),e.jsxs(n,{onClick:()=>c(!0),children:[e.jsx(p,{className:"w-5 h-5"})," New Workout"]})]}),C?e.jsx("div",{className:"space-y-4",children:[1,2,3].map(t=>e.jsx("div",{className:"card",children:e.jsx(D,{lines:3})},t))}):f.length===0?e.jsxs("div",{className:"card text-center py-16",children:[e.jsx(R,{className:"w-16 h-16 text-text-muted mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-semibold mb-2",children:"No workouts yet"}),e.jsx("p",{className:"text-text-muted mb-6",children:"Create your first workout to start earning XP!"}),e.jsxs(n,{onClick:()=>c(!0),children:[e.jsx(p,{className:"w-5 h-5"})," Create Workout"]})]}):e.jsx("div",{className:"space-y-4",children:f.map(t=>e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-lg",children:t.title||"Untitled Workout"}),e.jsx("p",{className:"text-sm text-text-muted",children:new Date(t.date).toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric",year:"numeric"})})]}),e.jsxs(n,{variant:"secondary",className:"!py-2 !px-4 !text-sm",onClick:()=>o(t.id),children:[e.jsx(p,{className:"w-4 h-4"})," Add Set"]})]}),t.sets&&t.sets.length>0?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-dark-border",children:[e.jsx("th",{className:"text-left py-2 text-text-muted font-medium",children:"Exercise"}),e.jsx("th",{className:"text-center py-2 text-text-muted font-medium",children:"Reps"}),e.jsx("th",{className:"text-center py-2 text-text-muted font-medium",children:"Weight"}),e.jsx("th",{className:"text-center py-2 text-text-muted font-medium",children:"RPE"})]})}),e.jsx("tbody",{children:t.sets.map(r=>{var y;return e.jsxs("tr",{className:"border-b border-dark-border/50",children:[e.jsx("td",{className:"py-2.5 font-medium",children:((y=r.exercise)==null?void 0:y.name)||"Unknown"}),e.jsx("td",{className:"py-2.5 text-center",children:r.reps}),e.jsx("td",{className:"py-2.5 text-center",children:r.weight?`${r.weight} lbs`:"â€”"}),e.jsx("td",{className:"py-2.5 text-center",children:r.rpe||"â€”"})]},r.id)})})]})}):e.jsx("p",{className:"text-sm text-text-muted italic",children:"No sets logged yet"})]},t.id))}),E&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm px-4",onClick:()=>c(!1),children:e.jsxs("div",{className:"glass-strong rounded-3xl p-6 sm:p-8 w-full max-w-md",onClick:t=>t.stopPropagation(),children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-xl font-bold",children:"New Workout"}),e.jsx("button",{onClick:()=>c(!1),className:"p-1 text-text-muted hover:text-text-primary",children:e.jsx(w,{className:"w-5 h-5"})})]}),e.jsxs("form",{onSubmit:I,className:"space-y-4",children:[e.jsx(m,{label:"Workout Title",placeholder:"e.g. Chest Day, Leg Day",value:h.title,onChange:t=>N({title:t.target.value})}),e.jsx(n,{type:"submit",loading:g,className:"w-full justify-center",children:"Create & Earn +10 XP"})]})]})}),b&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm px-4",onClick:()=>o(null),children:e.jsxs("div",{className:"glass-strong rounded-3xl p-6 sm:p-8 w-full max-w-md",onClick:t=>t.stopPropagation(),children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-xl font-bold",children:"Add Set"}),e.jsx("button",{onClick:()=>o(null),className:"p-1 text-text-muted hover:text-text-primary",children:e.jsx(w,{className:"w-5 h-5"})})]}),e.jsxs("form",{onSubmit:P,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-1.5",children:"Exercise"}),e.jsxs("select",{className:"w-full px-4 py-3 bg-dark-surface border border-dark-border rounded-xl text-text-primary focus:outline-none focus:border-primary transition-all",value:s.exerciseId,onChange:t=>i({...s,exerciseId:t.target.value}),children:[e.jsx("option",{value:"",children:"Select exercise..."}),v.map(t=>e.jsxs("option",{value:t.id,children:[t.name," ",t.muscleGroup?`(${t.muscleGroup})`:""]},t.id))]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[e.jsx(m,{label:"Reps",type:"number",placeholder:"10",value:s.reps,onChange:t=>i({...s,reps:t.target.value})}),e.jsx(m,{label:"Weight",type:"number",placeholder:"135",value:s.weight,onChange:t=>i({...s,weight:t.target.value})}),e.jsx(m,{label:"RPE",type:"number",placeholder:"8",value:s.rpe,onChange:t=>i({...s,rpe:t.target.value})})]}),e.jsx(n,{type:"submit",loading:g,className:"w-full justify-center",children:"Add Set"})]})]})})]})};export{$ as default};
