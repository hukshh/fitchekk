import{u as b,r as n,j as e,d as x,i as y,k as m,l as v,L as i,S as w,m as k,n as S}from"./index-DAsNgVti.js";import{u as L}from"./useApi-ex_VrPEw.js";const o=({icon:s,label:c,value:r,color:d,subtext:t})=>e.jsx("div",{className:"card",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-text-muted mb-1",children:c}),e.jsx("p",{className:"text-3xl font-bold",children:r}),t&&e.jsx("p",{className:"text-xs text-text-muted mt-1",children:t})]}),e.jsx("div",{className:`w-12 h-12 rounded-2xl flex items-center justify-center ${d}`,children:s})]})}),H=()=>{var p;const{user:s}=b(),{get:c}=L(),[r,d]=n.useState([]),[t,u]=n.useState(null),[N,g]=n.useState(!0);n.useEffect(()=>{(async()=>{try{const[l,f]=await Promise.all([c("/workouts?limit=5"),c("/attendance/today")]);d(l.workouts||[]),u(f)}catch(l){console.error("Dashboard fetch error:",l)}finally{g(!1)}})()},[c]);const h=Math.floor(((s==null?void 0:s.xp)||0)/100),j=((s==null?void 0:s.xp)||0)%100;return e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsxs("h1",{className:"text-3xl font-bold",children:["Welcome back, ",e.jsx("span",{className:"gradient-text",children:((p=s==null?void 0:s.user_name)==null?void 0:p.split(" ")[0])||"Athlete"})]}),e.jsx("p",{className:"text-text-muted mt-1",children:"Here's your fitness overview for today"})]}),e.jsxs("div",{className:"card !p-5 mb-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-primary to-secondary flex items-center justify-center",children:e.jsx(x,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{children:[e.jsxs("p",{className:"font-semibold",children:["Level ",h]}),e.jsxs("p",{className:"text-xs text-text-muted",children:[(s==null?void 0:s.xp)||0," Total XP"]})]})]}),e.jsxs("span",{className:"text-sm text-text-muted",children:[j,"/100 XP to next level"]})]}),e.jsx("div",{className:"w-full h-3 bg-dark-surface rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-gradient-to-r from-primary to-secondary rounded-full transition-all duration-1000 ease-out",style:{width:`${j}%`}})})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 mb-8",children:[e.jsx(o,{icon:e.jsx(x,{className:"w-6 h-6 text-primary"}),label:"Total XP",value:(s==null?void 0:s.xp)||0,color:"bg-primary/10",subtext:`Level ${h}`}),e.jsx(o,{icon:e.jsx(y,{className:"w-6 h-6 text-orange-400"}),label:"Current Streak",value:`${(s==null?void 0:s.streak)||0} days`,color:"bg-orange-400/10",subtext:"Keep it up!"}),e.jsx(o,{icon:e.jsx(m,{className:"w-6 h-6 text-secondary"}),label:"Workouts",value:r.length>0?`${r.length}+`:"0",color:"bg-secondary/10",subtext:"Recent sessions"}),e.jsx(o,{icon:e.jsx(v,{className:"w-6 h-6 text-accent"}),label:"Gym Status",value:t!=null&&t.checkedIn?"Active":"Idle",color:"bg-accent/10",subtext:t!=null&&t.checkedIn?"Currently checked in":"Not at the gym"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-bold",children:"Recent Workouts"}),e.jsx(i,{to:"/workouts",className:"text-sm text-primary hover:underline",children:"View All"})]}),N?e.jsx("div",{className:"space-y-3",children:[1,2,3].map(a=>e.jsx("div",{className:"card",children:e.jsx(w,{lines:2})},a))}):r.length===0?e.jsxs("div",{className:"card text-center py-12",children:[e.jsx(m,{className:"w-12 h-12 text-text-muted mx-auto mb-4"}),e.jsx("p",{className:"text-text-secondary mb-2",children:"No workouts yet"}),e.jsx(i,{to:"/workouts",className:"btn-primary !py-2 !px-6 !text-sm",children:"Log Your First Workout"})]}):e.jsx("div",{className:"space-y-3",children:r.map(a=>{var l;return e.jsxs("div",{className:"card !p-4 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-secondary/10 flex items-center justify-center",children:e.jsx(m,{className:"w-5 h-5 text-secondary"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-sm",children:a.title||"Workout"}),e.jsxs("p",{className:"text-xs text-text-muted",children:[new Date(a.date).toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"})," Â· ",((l=a.sets)==null?void 0:l.length)||0," sets"]})]})]}),e.jsx("span",{className:"text-xs font-medium text-primary bg-primary/10 px-3 py-1 rounded-full",children:"+10 XP"})]},a.id)})})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:"Quick Actions"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs(i,{to:"/workouts",className:"card !p-4 flex items-center gap-4 cursor-pointer group",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-primary/10 flex items-center justify-center group-hover:bg-primary/20 transition-colors",children:e.jsx(k,{className:"w-5 h-5 text-primary"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-sm",children:"New Workout"}),e.jsx("p",{className:"text-xs text-text-muted",children:"Start a training session"})]})]}),e.jsxs(i,{to:"/store",className:"card !p-4 flex items-center gap-4 cursor-pointer group",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-accent/10 flex items-center justify-center group-hover:bg-accent/20 transition-colors",children:e.jsx(S,{className:"w-5 h-5 text-accent"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-sm",children:"Visit Store"}),e.jsx("p",{className:"text-xs text-text-muted",children:"Browse fitness gear"})]})]}),e.jsxs(i,{to:"/profile",className:"card !p-4 flex items-center gap-4 cursor-pointer group",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-secondary/10 flex items-center justify-center group-hover:bg-secondary/20 transition-colors",children:e.jsx(x,{className:"w-5 h-5 text-secondary"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-sm",children:"View Profile"}),e.jsx("p",{className:"text-xs text-text-muted",children:"Stats & progress"})]})]})]})]})]})]})};export{H as default};
