import{u as w,r as s}from"./index-DAsNgVti.js";const g="/api",E=()=>{const{token:a,logout:n}=w(),e=s.useCallback(async(t,r={})=>{const p=`${g}${t}`,d={"Content-Type":"application/json",...a&&{Authorization:`Bearer ${a}`},...r.headers};try{const o=await fetch(p,{...r,headers:d}),c=await o.json();if(o.status===401)throw n(),new Error("Session expired. Please login again.");if(!o.ok)throw new Error(c.error||"Something went wrong");return c}catch(o){throw o.name==="TypeError"&&o.message==="Failed to fetch"?new Error("Unable to connect to server. Please try again."):o}},[a,n]),i=s.useCallback(t=>e(t),[e]),l=s.useCallback((t,r)=>e(t,{method:"POST",body:JSON.stringify(r)}),[e]),u=s.useCallback((t,r)=>e(t,{method:"PUT",body:JSON.stringify(r)}),[e]),h=s.useCallback(t=>e(t,{method:"DELETE"}),[e]);return{get:i,post:l,put:u,del:h,request:e}};export{E as u};
